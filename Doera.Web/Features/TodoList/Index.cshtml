@using Doera.Application.DTOs.Tags
@using Doera.Application.DTOs.TodoItem
@using Doera.Web.ViewModels
@model TodoListPageVM

@{
    ViewData["Title"] = Model.List.Name;
    ViewData["Breadcrumbs"] = new BreadcrumbsVM(
        new BreadcrumbSegment(Model.List.Name, Active: true)
    );
    ViewData["Filter"] = Model.Filter;
}

@section Tags{
    @await Html.PartialAsync("_TodoItemFilterBar", Model.Filter)
    @await Component.InvokeAsync("GetTags", new { filter = new TagFilter { TodoListId = Model.List.Id } })
}

<div class="container py-3">
    <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
            <h1 class="h3 m-0">@Model.List.Name</h1>
        </div>
    </div>
    <div class="d-flex gap-2 flex-column">
        <div class="d-flex">
            <div class="col-8 d-flex flex-column gap-2">
            @await Html.PartialAsync("_TodoItemQuickCreate", new CreateTodoItemVM { TodoListId = Model.List.Id })
            </div>
            <div class="col-4 bg-white">
            </div>
        </div>
        <div class="d-flex gap-2 align-items-start">
            @await Component.InvokeAsync("GetTodoItems", new { filter = Model.Filter })

        </div>
        
    </div>
    
</div>
